import{c as Se,r,y as l,j as e,H as te,U as $,l as ae,d as Ue,X as re,R as le,k as ie}from"./index-Dd0hWMfm.js";import{A as P}from"./activity-D_581bAL.js";import{A as Ce}from"./alert-circle-D6URrzm9.js";import{S as ce}from"./search-Uk50jACv.js";import{P as M}from"./pen-square-DwVVHG1I.js";import{T as ne}from"./trash-2-BgjBxcFH.js";import{E as ke,U as de}from"./user-PG5FLUd6.js";import{E as De}from"./eye-BCRd92Mq.js";import{D as Ae}from"./download-BydA2CqH.js";const oe=Se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ie=()=>{const[b,w]=r.useState([]),[H,R]=r.useState([]),[a,p]=r.useState(null),[k,me]=r.useState(""),[D,xe]=r.useState("all"),[A,ue]=r.useState("all"),[V,f]=r.useState(!1),[X,L]=r.useState(!1),[y,_]=r.useState([]),[O,Z]=r.useState([]),[S,he]=r.useState(""),[T,pe]=r.useState("all"),[g,G]=r.useState({start:new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[U,z]=r.useState({total_users:0,active_users_today:0,active_subscriptions:0,total_logins_today:0,average_session_time:0}),[n,C]=r.useState({email:"",password:"",role:"user",status:"active"}),[N,F]=r.useState("users"),[v,j]=r.useState(!0),[J,u]=r.useState(null),[K,h]=r.useState(null),[I,ge]=r.useState(!1);r.useEffect(()=>{E(),je(),fe()},[]),r.useEffect(()=>{ye()},[b,k,D,A]),r.useEffect(()=>{Ne()},[y,S,T,g]);const E=async()=>{try{if(j(!0),u(null),!l){const x=[{id:"1",email:"admin@example.com",created_at:"2023-01-01T00:00:00.000Z",last_sign_in_at:"2023-06-15T10:30:00.000Z",role:"admin",status:"active",subscription_status:"active",subscription_plan:"Enterprise"},{id:"2",email:"manager@example.com",created_at:"2023-02-15T00:00:00.000Z",last_sign_in_at:"2023-06-14T14:20:00.000Z",role:"manager",status:"active",subscription_status:"active",subscription_plan:"Pro"},{id:"3",email:"user1@example.com",created_at:"2023-03-10T00:00:00.000Z",last_sign_in_at:"2023-06-10T09:15:00.000Z",role:"user",status:"active",subscription_status:"active",subscription_plan:"Basic"},{id:"4",email:"user2@example.com",created_at:"2023-04-05T00:00:00.000Z",last_sign_in_at:null,role:"user",status:"pending",subscription_status:null,subscription_plan:null},{id:"5",email:"suspended@example.com",created_at:"2023-05-20T00:00:00.000Z",last_sign_in_at:"2023-05-25T16:45:00.000Z",role:"user",status:"suspended",subscription_status:"canceled",subscription_plan:"Basic"}];w(x),R(x),j(!1);return}const{data:s,error:t}=await l.auth.admin.listUsers();if(t)throw t;const{data:i,error:c}=await l.from("user_roles").select("*");if(c)throw c;const{data:d,error:o}=await l.from("subscriptions").select("*");if(o)throw o;const m=s.users.map(x=>{const ee=i?.find(B=>B.user_id===x.id),se=d?.find(B=>B.user_id===x.id);return{id:x.id,email:x.email||"",created_at:x.created_at,last_sign_in_at:x.last_sign_in_at,role:ee?.role||"user",status:ee?.status||"active",subscription_status:se?.status,subscription_plan:se?.plan_name}});w(m),R(m)}catch(s){console.error("Error fetching users:",s),u("Failed to fetch users. Please try again.")}finally{j(!1)}},je=async()=>{try{if(!l){const i=[{id:"1",user_id:"1",user_email:"admin@example.com",action:"login",resource:"auth",details:"User logged in successfully",ip_address:"192.168.1.1",created_at:"2023-06-15T10:30:00.000Z"},{id:"2",user_id:"1",user_email:"admin@example.com",action:"update",resource:"user",details:"Updated user role for user2@example.com",ip_address:"192.168.1.1",created_at:"2023-06-15T10:35:00.000Z"},{id:"3",user_id:"2",user_email:"manager@example.com",action:"login",resource:"auth",details:"User logged in successfully",ip_address:"192.168.1.2",created_at:"2023-06-14T14:20:00.000Z"},{id:"4",user_id:"3",user_email:"user1@example.com",action:"login",resource:"auth",details:"User logged in successfully",ip_address:"192.168.1.3",created_at:"2023-06-10T09:15:00.000Z"},{id:"5",user_id:"1",user_email:"admin@example.com",action:"create",resource:"user",details:"Created new user: user2@example.com",ip_address:"192.168.1.1",created_at:"2023-04-05T08:00:00.000Z"}];_(i),Z(i);return}const{data:s,error:t}=await l.from("audit_logs").select("*").order("created_at",{ascending:!1});if(t)throw t;_(s||[]),Z(s||[])}catch(s){console.error("Error fetching audit logs:",s),u("Failed to fetch audit logs. Please try again.")}},fe=async()=>{try{if(!l){z({total_users:5,active_users_today:3,active_subscriptions:3,total_logins_today:8,average_session_time:25});return}const s=new Date().toISOString().split("T")[0],{count:t}=await l.from("auth.users").select("*",{count:"exact",head:!0}),{count:i}=await l.from("audit_logs").select("*",{count:"exact",head:!0}).eq("action","login").gte("created_at",`${s}T00:00:00.000Z`),{count:c}=await l.from("subscriptions").select("*",{count:"exact",head:!0}).eq("status","active"),{count:d}=await l.from("audit_logs").select("*",{count:"exact",head:!0}).eq("action","login").gte("created_at",`${s}T00:00:00.000Z`);z({total_users:t||0,active_users_today:i||0,active_subscriptions:c||0,total_logins_today:d||0,average_session_time:25})}catch(s){console.error("Error fetching system stats:",s)}},ye=()=>{let s=[...b];k&&(s=s.filter(t=>t.email.toLowerCase().includes(k.toLowerCase()))),D!=="all"&&(s=s.filter(t=>t.role===D)),A!=="all"&&(s=s.filter(t=>t.status===A)),R(s)},Ne=()=>{let s=[...y];S&&(s=s.filter(c=>c.user_email.toLowerCase().includes(S.toLowerCase())||c.details.toLowerCase().includes(S.toLowerCase()))),T!=="all"&&(s=s.filter(c=>c.action===T));const t=new Date(g.start),i=new Date(g.end);i.setHours(23,59,59,999),s=s.filter(c=>{const d=new Date(c.created_at);return d>=t&&d<=i}),Z(s)},ve=s=>{p(s),f(!1)},Q=async s=>{s.preventDefault();try{if(j(!0),u(null),h(null),X){if(!l){const d={id:`${Date.now()}`,email:n.email,created_at:new Date().toISOString(),last_sign_in_at:null,role:n.role,status:n.status};w([...b,d]);const o={id:`${Date.now()}`,user_id:"1",user_email:"admin@example.com",action:"create",resource:"user",details:`Created new user: ${n.email}`,ip_address:"192.168.1.1",created_at:new Date().toISOString()};_([o,...y]),h("User created successfully"),L(!1),C({email:"",password:"",role:"user",status:"active"});return}const{data:t,error:i}=await l.auth.admin.createUser({email:n.email,password:n.password,email_confirm:!0});if(i)throw i;if(!t.user)throw new Error("Failed to create user");const{error:c}=await l.from("user_roles").insert({user_id:t.user.id,role:n.role,status:n.status});if(c)throw c;await l.from("audit_logs").insert({user_id:"1",user_email:"admin@example.com",action:"create",resource:"user",details:`Created new user: ${n.email}`,ip_address:"127.0.0.1"}),h("User created successfully"),E()}else if(V&&a){if(!l){const i=b.map(d=>d.id===a.id?{...d,role:a.role,status:a.status}:d);w(i);const c={id:`${Date.now()}`,user_id:"1",user_email:"admin@example.com",action:"update",resource:"user",details:`Updated user: ${a.email}`,ip_address:"192.168.1.1",created_at:new Date().toISOString()};_([c,...y]),h("User updated successfully"),f(!1);return}const{error:t}=await l.from("user_roles").upsert({user_id:a.id,role:a.role,status:a.status});if(t)throw t;await l.from("audit_logs").insert({user_id:"1",user_email:"admin@example.com",action:"update",resource:"user",details:`Updated user: ${a.email}`,ip_address:"127.0.0.1"}),h("User updated successfully"),E(),f(!1)}}catch(t){console.error("Error submitting user form:",t),u("Failed to save user. Please try again.")}finally{j(!1)}},be=async(s,t)=>{if(window.confirm(`Are you sure you want to delete user ${t}?`))try{if(j(!0),u(null),!l){const d=b.filter(m=>m.id!==s);w(d);const o={id:`${Date.now()}`,user_id:"1",user_email:"admin@example.com",action:"delete",resource:"user",details:`Deleted user: ${t}`,ip_address:"192.168.1.1",created_at:new Date().toISOString()};_([o,...y]),h("User deleted successfully"),p(null);return}const{error:i}=await l.auth.admin.deleteUser(s);if(i)throw i;const{error:c}=await l.from("user_roles").delete().eq("user_id",s);if(c)throw c;await l.from("audit_logs").insert({user_id:"1",user_email:"admin@example.com",action:"delete",resource:"user",details:`Deleted user: ${t}`,ip_address:"127.0.0.1"}),h("User deleted successfully"),E(),p(null)}catch(i){console.error("Error deleting user:",i),u("Failed to delete user. Please try again.")}finally{j(!1)}},we=()=>{const i=[["ID","User","Action","Resource","Details","IP Address","Timestamp"].join(","),...O.map(m=>[m.id,m.user_email,m.action,m.resource,`"${m.details.replace(/"/g,'""')}"`,m.ip_address,new Date(m.created_at).toLocaleString()].join(","))].join(`
`),c=new Blob([i],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(c),o=document.createElement("a");o.setAttribute("href",d),o.setAttribute("download",`audit_logs_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},q=s=>s?new Date(s).toLocaleString():"Never",W=s=>{switch(s){case"active":return"bg-green-100 text-green-800";case"suspended":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},Y=s=>{switch(s){case"admin":return"bg-purple-100 text-purple-800";case"manager":return"bg-blue-100 text-blue-800";case"user":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},_e=s=>{switch(s){case"create":return"bg-green-100 text-green-800";case"update":return"bg-blue-100 text-blue-800";case"delete":return"bg-red-100 text-red-800";case"login":return"bg-purple-100 text-purple-800";case"logout":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card shadow-md border-blue-200",children:e.jsx("div",{className:"card-header bg-gradient-to-r from-blue-50 to-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage users, view logs, and monitor system performance"})]}),e.jsx(te,{className:"h-12 w-12 text-blue-600"})]})})}),e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{className:`px-4 py-2 font-medium text-sm ${N==="users"?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700"}`,onClick:()=>F("users"),children:[e.jsx($,{className:"h-4 w-4 inline mr-2"}),"User Management"]}),e.jsxs("button",{className:`px-4 py-2 font-medium text-sm ${N==="logs"?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700"}`,onClick:()=>F("logs"),children:[e.jsx(P,{className:"h-4 w-4 inline mr-2"}),"Audit Logs"]}),e.jsxs("button",{className:`px-4 py-2 font-medium text-sm ${N==="stats"?"text-blue-600 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700"}`,onClick:()=>F("stats"),children:[e.jsx(ae,{className:"h-4 w-4 inline mr-2"}),"System Statistics"]})]}),K&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded relative",children:[e.jsxs("div",{className:"flex",children:[e.jsx(Ue,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:K})]}),e.jsx("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>h(null),children:e.jsx(re,{className:"h-5 w-5 text-green-600"})})]}),J&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded relative",children:[e.jsxs("div",{className:"flex",children:[e.jsx(Ce,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:J})]}),e.jsx("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>u(null),children:e.jsx(re,{className:"h-5 w-5 text-red-600"})})]}),N==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search users by email...",className:"form-input pl-10",value:k,onChange:s=>me(s.target.value)})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{className:"form-select",value:D,onChange:s=>xe(s.target.value),children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"user",children:"User"})]}),e.jsxs("select",{className:"form-select",value:A,onChange:s=>ue(s.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>{L(!0),p(null)},children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Add User"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Users"})}),e.jsx("div",{className:"card-body p-0",children:v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(le,{className:"h-8 w-8 text-blue-500 animate-spin"})}):H.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx($,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No users found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(s=>e.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${a?.id===s.id?"bg-blue-50":""}`,onClick:()=>ve(s),children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.email}),s.subscription_plan&&e.jsxs("div",{className:"text-xs text-gray-500",children:[s.subscription_plan," Plan"]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Y(s.role)}`,children:s.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${W(s.status)}`,children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.last_sign_in_at?new Date(s.last_sign_in_at).toLocaleDateString():"Never"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",onClick:t=>{t.stopPropagation(),p(s),f(!0),L(!1)},children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:t=>{t.stopPropagation(),be(s.id,s.email)},children:e.jsx(ne,{className:"h-4 w-4"})})]})]},s.id))})]})})})]})}),e.jsx("div",{className:"lg:col-span-1",children:X?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New User"})}),e.jsx("div",{className:"card-body",children:e.jsx("form",{onSubmit:Q,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-input",value:n.email,onChange:s=>C({...n,email:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:I?"text":"password",className:"form-input pr-10",value:n.password,onChange:s=>C({...n,password:s.target.value}),required:!0}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>ge(!I),children:I?e.jsx(ke,{className:"h-5 w-5 text-gray-400"}):e.jsx(De,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Role"}),e.jsxs("select",{className:"form-select",value:n.role,onChange:s=>C({...n,role:s.target.value}),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{className:"form-select",value:n.status,onChange:s=>C({...n,status:s.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>L(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?"Saving...":"Create User"})]})]})})})]}):V&&a?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit User"})}),e.jsx("div",{className:"card-body",children:e.jsx("form",{onSubmit:Q,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:"form-input bg-gray-100",value:a.email,disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Role"}),e.jsxs("select",{className:"form-select",value:a.role,onChange:s=>p({...a,role:s.target.value}),children:[e.jsx("option",{value:"user",children:"User"}),e.jsx("option",{value:"manager",children:"Manager"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Status"}),e.jsxs("select",{className:"form-select",value:a.status,onChange:s=>p({...a,status:s.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>f(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?"Saving...":"Update User"})]})]})})})]}):a?e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"User Details"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"h-24 w-24 rounded-full bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx(de,{className:"h-12 w-12"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:a.email})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Role"}),e.jsx("p",{className:"text-base font-medium",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Y(a.role)}`,children:a.role})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("p",{className:"text-base font-medium",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${W(a.status)}`,children:a.status})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Subscription"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:a.subscription_plan?`${a.subscription_plan} (${a.subscription_status})`:"No active subscription"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Created"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:q(a.created_at)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Last Login"}),e.jsx("p",{className:"text-base font-medium text-gray-900",children:q(a.last_sign_in_at)})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4",children:e.jsxs("button",{className:"btn btn-primary",onClick:()=>f(!0),children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Edit User"]})})]})})]}):e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center py-12",children:[e.jsx($,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No User Selected"}),e.jsx("p",{className:"text-gray-500 mt-2",children:'Select a user from the list to view details or click "Add User" to create a new user.'})]})})})]})]}),N==="logs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search logs by user or details...",className:"form-input pl-10",value:S,onChange:s=>he(s.target.value)})]})}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsxs("select",{className:"form-select",value:T,onChange:s=>pe(s.target.value),children:[e.jsx("option",{value:"all",children:"All Actions"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"logout",children:"Logout"}),e.jsx("option",{value:"create",children:"Create"}),e.jsx("option",{value:"update",children:"Update"}),e.jsx("option",{value:"delete",children:"Delete"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",className:"form-input",value:g.start,onChange:s=>G({...g,start:s.target.value})}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"date",className:"form-input",value:g.end,onChange:s=>G({...g,end:s.target.value})})]}),e.jsxs("button",{className:"btn btn-secondary",onClick:we,children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]})})}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audit Logs"})}),e.jsx("div",{className:"card-body p-0",children:v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(le,{className:"h-8 w-8 text-blue-500 animate-spin"})}):O.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(P,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No logs found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resource"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(s.created_at)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.user_email}),e.jsx("div",{className:"text-xs text-gray-500",children:s.user_id})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${_e(s.action)}`,children:s.action})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.resource}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:s.details}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.ip_address})]},s.id))})]})})})]})]}),N==="stats"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-5",children:[e.jsx("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx($,{className:"h-10 w-10 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:U.total_users})]})]})})}),e.jsx("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-green-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(P,{className:"h-10 w-10 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Active Today"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:U.active_users_today})]})]})})}),e.jsx("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(te,{className:"h-10 w-10 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Subscriptions"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:U.active_subscriptions})]})]})})}),e.jsx("div",{className:"card bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ie,{className:"h-10 w-10 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Logins Today"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:U.total_logins_today})]})]})})}),e.jsx("div",{className:"card bg-gradient-to-br from-red-50 to-red-100 border-red-200 shadow-md hover:shadow-lg transition-shadow",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ie,{className:"h-10 w-10 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg. Session"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[U.average_session_time,"m"]})]})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"User Growth"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"h-80 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ae,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsxs("p",{className:"text-gray-500",children:["User growth chart will be displayed here.",e.jsx("br",{}),"Connect to your analytics service for real-time data."]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"System Health"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"API Services"})]}),e.jsx("span",{className:"text-green-600 text-sm",children:"Operational"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Database"})]}),e.jsx("span",{className:"text-green-600 text-sm",children:"Operational"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Authentication"})]}),e.jsx("span",{className:"text-green-600 text-sm",children:"Operational"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Storage"})]}),e.jsx("span",{className:"text-green-600 text-sm",children:"Operational"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Payment Processing"})]}),e.jsx("span",{className:"text-green-600 text-sm",children:"Operational"})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Activity"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"space-y-4",children:y.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-start",children:[e.jsxs("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 ${s.action==="login"?"bg-purple-100 text-purple-600":s.action==="create"?"bg-green-100 text-green-600":s.action==="update"?"bg-blue-100 text-blue-600":s.action==="delete"?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,children:[s.action==="login"&&e.jsx(de,{className:"h-4 w-4"}),s.action==="create"&&e.jsx(oe,{className:"h-4 w-4"}),s.action==="update"&&e.jsx(M,{className:"h-4 w-4"}),s.action==="delete"&&e.jsx(ne,{className:"h-4 w-4"}),!["login","create","update","delete"].includes(s.action)&&e.jsx(P,{className:"h-4 w-4"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.details}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:s.user_email}),e.jsx("span",{className:"mx-1",children:"â€¢"}),e.jsx("span",{children:new Date(s.created_at).toLocaleString()})]})]})]},s.id))})})]})]})]})]})};export{Ie as default};
